# 视频混剪工具 - 备份和发布指南

本文档提供了关于如何备份源代码、清理Git仓库以及创建独立可执行文件的详细指南。

## 目录

1. [源代码备份](#源代码备份)
2. [Git仓库清理](#Git仓库清理)
3. [创建独立可执行文件](#创建独立可执行文件)
4. [常见问题](#常见问题)

## 源代码备份

我们提供了一个简单的Python脚本来创建源代码的备份，避免"找不到文件夹路径"的问题。

### 使用方法

1. 运行 `create_backup.py` 脚本:
```
python create_backup.py [输出目录] [是否包含临时文件]
```

**参数说明:**
- `输出目录`: 可选参数，备份文件保存的目录，默认为当前目录
- `是否包含临时文件`: 可选参数，值为 "true" 或 "false"，默认为 "false"

**示例:**
- 创建默认备份：`python create_backup.py`
- 指定输出目录：`python create_backup.py D:\备份`
- 包含临时文件：`python create_backup.py D:\备份 true`

### 备份内容

备份将包含项目中所有的源代码文件，但默认会排除以下内容：
- `.git` 目录（Git相关文件）
- `temp` 目录（临时文件，除非指定包含）

备份文件将以 `source_backup_年月日_时分秒.zip` 的格式命名。

## Git仓库清理

如果您在推送到Git仓库时遇到"文件太大"的问题，可以使用 `clean_git_repo.py` 脚本来清理仓库。

### 使用前准备

1. 确保已创建 `.gitignore` 文件（已为您准备好）
2. 建议先运行 `create_backup.py` 创建一个完整备份

### 使用方法

运行以下命令：
```
python clean_git_repo.py
```

### 工作原理

脚本会执行以下操作：
1. 备份所有重要文件到 `git_backup` 目录
2. 删除当前的 `.git` 目录，清除所有历史记录
3. 初始化一个新的Git仓库
4. 添加所有（符合 `.gitignore` 规则的）文件并提交
5. 提供推送到远程仓库的指令

### 注意事项

- 此操作将**删除所有Git历史记录**
- 重新推送到远程仓库需要使用 `--force` 参数

## 创建独立可执行文件

为了方便分发软件，我们提供了 `create_standalone_exe.py` 脚本，可以创建包含所有依赖的独立可执行文件。

### 使用前准备

确保已安装Python和必要的依赖项。脚本会自动安装PyInstaller（如果尚未安装）。

### 使用方法

1. 运行脚本：
```
python create_standalone_exe.py [主脚本文件] [输出名称]
```

**参数说明:**
- `主脚本文件`: 可选参数，程序的入口点Python文件，默认为 `main.py`
- `输出名称`: 可选参数，生成的可执行文件名称（不含扩展名），默认为 "视频混剪工具"

**示例:**
- 使用默认设置：`python create_standalone_exe.py`
- 指定主脚本：`python create_standalone_exe.py app.py`
- 指定名称：`python create_standalone_exe.py main.py 我的视频剪辑工具`

### 生成文件

成功运行后，可执行文件将保存在 `dist` 目录下，默认名称为 `视频混剪工具.exe`。

### 自定义打包

如需更改打包配置（如包含额外文件或目录），请编辑脚本中的 `find_data_files` 函数。

## 常见问题

### 1. "找不到文件夹路径"错误

**问题:** 尝试打包压缩源代码时提示"找不到文件夹路径"。

**解决方案:** 使用提供的 `create_backup.py` 脚本创建备份。此脚本会正确处理所有路径问题。

### 2. Git推送失败 - "文件太大"

**问题:** 推送到Git仓库时显示文件太大。

**解决方案:**
- 确保 `.gitignore` 文件配置正确（已为您准备好）
- 使用 `clean_git_repo.py` 脚本清理仓库历史
- 对于已经提交的大文件，需要使用 `git filter-branch` 或 `BFG Repo-Cleaner` 工具（高级用户）

### 3. 如何发送给其他用户

**问题:** 如何便捷地分发软件给其他用户。

**解决方案:**
- 使用 `create_standalone_exe.py` 创建一个包含所有依赖的可执行文件
- 将生成的 `.exe` 文件发送给用户
- 用户无需安装Python或任何依赖项即可运行程序

### 4. 备份文件很大怎么办

**问题:** 备份文件体积过大。

**解决方案:**
- 确保排除了 `temp` 目录（默认已排除）
- 考虑手动删除不必要的大文件后再创建备份
- 对于较大的多媒体文件，考虑分开备份 